{% extends 'base.html' %}
{% block content %}
<section class="hero card border-0 shadow-sm rounded-4 p-4 p-lg-5 mb-4">
  <div class="d-flex flex-column flex-lg-row align-items-center gap-4">
    <div class="profile-avatar" style="--photo: url('{{ photo_data }}');" aria-label="Profile photo" role="img"></div>
    <div class="flex-grow-1">
      <h1 class="display-6 fw-bold mb-2">{{ r.name }}</h1>
      <p class="lead mb-3">{{ r.objective }}</p>
      <div class="d-flex flex-wrap gap-2">
        <span class="badge rounded-pill text-bg-primary-soft"><i class="bi bi-geo-alt"></i> {{ r.contact.address }}</span>
        <span class="badge rounded-pill text-bg-success-soft"><i class="bi bi-telephone"></i> {{ r.contact.phone }}</span>
        <span class="badge rounded-pill text-bg-info-soft"><i class="bi bi-envelope"></i> {{ r.contact.email }}</span>
      </div>
    </div>
  </div>
</section>

<div class="row g-4">
  <div class="col-lg-8">
    <section class="card shadow-sm rounded-4">
      <div class="card-body">
        <div class="section-heading"><i class="bi bi-briefcase"></i><span>Experience</span></div>
        {% for exp in r.experience %}
        <div class="mb-3">
          <div class="d-flex justify-content-between flex-wrap">
            <strong>{{ exp.title }}</strong>
            <span class="text-muted">{{ exp.company }} · {{ exp.period }}</span>
          </div>
          <ul class="mb-0">
            {% for h in exp.highlights %}
            <li>{{ h }}</li>
            {% endfor %}
          </ul>
        </div>
        {% endfor %}
      </div>
    </section>

    <section class="card shadow-sm rounded-4 mt-4">
      <div class="card-body">
        <ul class="nav nav-pills mb-3" id="resumeTabs" role="tablist">
          <li class="nav-item" role="presentation"><button class="nav-link active" id="projects-tab" data-bs-toggle="pill" data-bs-target="#projects" type="button" role="tab">Projects</button></li>
          <li class="nav-item" role="presentation"><button class="nav-link" id="certs-tab" data-bs-toggle="pill" data-bs-target="#certs" type="button" role="tab">Certifications</button></li>
          <li class="nav-item" role="presentation"><button class="nav-link" id="stack-tab" data-bs-toggle="pill" data-bs-target="#stack" type="button" role="tab">Tech Stack</button></li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane fade show active" id="projects" role="tabpanel">
            <div class="row g-3">
              {% for p in r.projects %}
              <div class="col-md-6"><div class="project-card p-3 rounded-3 h-100"><strong class="d-block mb-1">{{ p.name }}</strong><p class="mb-0">{{ p.description }}</p></div></div>
              {% endfor %}
            </div>
          </div>
          <div class="tab-pane fade" id="certs" role="tabpanel">
            <div class="vlist">{% for c in r.certifications %}<div class="vitem"><i class="bi bi-patch-check text-primary"></i> {{ c }}</div>{% endfor %}</div>
          </div>
          <div class="tab-pane fade" id="stack" role="tabpanel">
            <div class="row g-3">
              <div class="col-sm-6"><div class="p-3 rounded-3 bg-light"><div class="fw-semibold mb-2">Tools</div><div class="d-flex flex-wrap gap-2">{% for s in r.skills.technical %}<span class="badge bg-primary-subtle text-primary">{{ s }}</span>{% endfor %}</div></div></div>
              <div class="col-sm-6"><div class="p-3 rounded-3 bg-light"><div class="fw-semibold mb-2">Soft Skills</div><div class="d-flex flex-wrap gap-2">{% for s in r.skills.soft %}<span class="badge bg-success-subtle text-success">{{ s }}</span>{% endfor %}</div></div></div>
              <div class="col-12"><div class="p-3 rounded-3 bg-light mt-2"><div class="fw-semibold mb-2">Additional</div><div class="d-flex flex-wrap gap-2">{% for s in r.skills.additional %}<span class="badge bg-info-subtle text-info">{{ s }}</span>{% endfor %}</div></div></div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <div class="col-lg-4">
    <section class="card shadow-sm rounded-4">
      <div class="card-body">
        <div class="section-heading"><i class="bi bi-mortarboard"></i><span>Education</span></div>
        <div class="table-responsive">
          <table class="table table-sm align-middle">
            <thead>
              <tr><th>Course</th><th>Institution</th><th>Year</th><th>Marks</th></tr>
            </thead>
            <tbody>
              {% for e in r.education %}
              <tr>
                <td>{{ e.course }}</td>
                <td>{{ e.institution }}</td>
                <td>{{ e.year }}</td>
                <td>{{ e.marks }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <section class="card shadow-sm rounded-4 mt-4">
      <div class="card-body">
        <div class="section-heading"><i class="bi bi-translate"></i><span>Languages</span></div>
        <ul class="mb-0">
          {% for lang in r.languages %}
            <li><i class="bi bi-check2-circle text-success"></i> {{ lang.name }} — {{ lang.level }}</li>
          {% endfor %}
        </ul>
      </div>
    </section>

    <section class="card shadow-sm rounded-4 mt-4"><div class="card-body highlight-callout"><div class="d-flex align-items-center"><div class="sparkle me-3"></div><div><div class="fw-semibold">Focus Areas</div><div class="text-muted small">Automation · Robotics · Machine Vision · Quality Control</div></div></div></div></section>
  </div>
</div>
{% endblock %}